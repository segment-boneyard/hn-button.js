(function(){function e(t,n,r){var i=e.resolve(t);if(null==i){r=r||t,n=n||"root";var s=new Error('Failed to require "'+r+'" from "'+n+'"');throw s.path=r,s.parent=n,s.require=!0,s}var o=e.modules[i];return o.exports||(o.exports={},o.client=o.component=!0,o.call(this,o.exports,e.relative(i),o)),o.exports}e.modules={},e.aliases={},e.resolve=function(t){t.charAt(0)==="/"&&(t=t.slice(1));var n=t+"/index.js",r=[t,t+".js",t+".json",t+"/index.js",t+"/index.json"];for(var i=0;i<r.length;i++){var t=r[i];if(e.modules.hasOwnProperty(t))return t}if(e.aliases.hasOwnProperty(n))return e.aliases[n]},e.normalize=function(e,t){var n=[];if("."!=t.charAt(0))return t;e=e.split("/"),t=t.split("/");for(var r=0;r<t.length;++r)".."==t[r]?e.pop():"."!=t[r]&&""!=t[r]&&n.push(t[r]);return e.concat(n).join("/")},e.register=function(t,n){e.modules[t]=n},e.alias=function(t,n){if(!e.modules.hasOwnProperty(t))throw new Error('Failed to alias "'+t+'", it does not exist');e.aliases[n]=t},e.relative=function(t){function r(e,t){var n=e.length;while(n--)if(e[n]===t)return n;return-1}function i(n){var r=i.resolve(n);return e(r,t,n)}var n=e.normalize(t,"..");return i.resolve=function(i){var s=i.charAt(0);if("/"==s)return i.slice(1);if("."==s)return e.normalize(n,i);var o=t.split("/"),u=r(o,"deps")+1;return u||(u=0),i=o.slice(0,u+1).join("/")+"/deps/"+i,i},i.exists=function(t){return e.modules.hasOwnProperty(i.resolve(t))},i},e.register("component-bind/index.js",function(e,t,n){var r=[].slice;n.exports=function(e,t){"string"==typeof t&&(t=e[t]);if("function"!=typeof t)throw new Error("bind() requires a function");var n=[].slice.call(arguments,2);return function(){return t.apply(e,n.concat(r.call(arguments)))}}}),e.register("component-type/index.js",function(e,t,n){var r=Object.prototype.toString;n.exports=function(e){switch(r.call(e)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}return e===null?"null":e===undefined?"undefined":e&&e.nodeType===1?"element":e===Object(e)?"object":typeof e}}),e.register("component-each/index.js",function(e,t,n){function s(e,t){for(var n=0;n<e.length;++n)t(e.charAt(n),n)}function o(e,t){for(var n in e)i.call(e,n)&&t(n,e[n])}function u(e,t){for(var n=0;n<e.length;++n)t(e[n],n)}var r=t("type"),i=Object.prototype.hasOwnProperty;n.exports=function(e,t){switch(r(e)){case"array":return u(e,t);case"object":if("number"==typeof e.length)return u(e,t);return o(e,t);case"string":return s(e,t)}}}),e.register("component-indexof/index.js",function(e,t,n){var r=[].indexOf;n.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}}),e.register("component-emitter/index.js",function(e,t,n){function i(e){if(e)return s(e)}function s(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}var r=t("indexof");n.exports=i,i.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},i.prototype.once=function(e,t){function r(){n.off(e,r),t.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},t._off=r,this.on(e,r),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=function(e,t){this._callbacks=this._callbacks||{};if(0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;var i=r(n,t._off||t);return~i&&n.splice(i,1),this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}}),e.register("component-event/index.js",function(e,t,n){e.bind=function(e,t,n,r){return e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent("on"+t,n),n},e.unbind=function(e,t,n,r){return e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent("on"+t,n),n}}),e.register("component-query/index.js",function(e,t,n){function r(e,t){return t.querySelector(e)}e=n.exports=function(e,t){return t=t||document,r(e,t)},e.all=function(e,t){return t=t||document,t.querySelectorAll(e)},e.engine=function(t){if(!t.one)throw new Error(".one callback required");if(!t.all)throw new Error(".all callback required");r=t.one,e.all=t.all}}),e.register("matthewmueller-uid/index.js",function(e,t,n){function r(e){return e=e||7,Math.random().toString(35).substr(2,e)}n.exports=r}),e.register("hn-button/index.js",function(e,t,n){function c(e){this.id="hn-button-"+a(),o(window,"message",r(this,this.onMessage)),this.render(e)}function h(e){var t="";return i(e,function(e,n){t+=t?"&":"?",n&&(t+=e+"="+encodeURIComponent(n))}),l+t}var r=t("bind"),i=t("each"),s=t("emitter"),o=t("event").bind,u=t("query"),a=t("uid"),f=new s,l=location.protocol+"//hn-button.herokuapp.com";f.on("load",function(e){var t=e.target;t.width=Math.ceil(e.width)}),f.initialize=function(e){new c(e)},c.prototype.render=function(e){var t={title:e.getAttribute("data-title")||document.title,url:e.getAttribute("data-url")||window.location.href,style:e.getAttribute("data-style"),count:e.getAttribute("data-count")},n=this.iframe=document.createElement("iframe");n.src=h(t),n.id=n.name=this.id,n.className="hn-button",n.setAttribute("data-title",t.title),n.setAttribute("data-url",t.url),t.style&&n.setAttribute("data-style",t.style),t.count&&n.setAttribute("data-count",t.count),n.title="Hacker News Button",n.height=t.count==="vertical"?62:20,n.width=100,n.frameBorder=0,e.parentNode.insertBefore(n,e),e.parentNode.removeChild(e)},c.prototype.onMessage=function(e){if(e.origin!==l)return;if(e.data.id!==this.id)return;var t=e.data.event,n=e.data.data;n.type=t,n.id=this.id,n.target=this.iframe,f.emit(t,n)},i(u.all(".hn-button"),f.initialize);if(window.HN)while(window.HN.length>0){var p=window.HN.shift(),d=p.shift();f[d]&&f[d].apply(f,p)}n.exports=f}),e.alias("component-bind/index.js","hn-button/deps/bind/index.js"),e.alias("component-each/index.js","hn-button/deps/each/index.js"),e.alias("component-type/index.js","component-each/deps/type/index.js"),e.alias("component-emitter/index.js","hn-button/deps/emitter/index.js"),e.alias("component-indexof/index.js","component-emitter/deps/indexof/index.js"),e.alias("component-event/index.js","hn-button/deps/event/index.js"),e.alias("component-query/index.js","hn-button/deps/query/index.js"),e.alias("matthewmueller-uid/index.js","hn-button/deps/uid/index.js"),typeof exports=="object"?module.exports=e("hn-button"):typeof define=="function"&&define.amd?define(function(){return e("hn-button")}):this.HN=e("hn-button")})();